sap.ui.define([],function(){"use strict";return{onInitSmartFilterBarExtension:function(e){var a=e.getSource();var t=(new Date).getFullYear();var s=(new Date).getFullYear();var r=(new Date).getMonth();var i=(new Date).getMonth()-1;if(r==1){i=12;s=s-1}var +
n=new Date(s,i,26);var o=new Date(t,r,25);var l={DtApropriacao:{ranges:[{exclude:false,operation:"BT",keyField:"DtApropriacao",value1:n,value2:o}]}};a.setFilterData(l)},uploadFile:function(e){var a=this;var t=new sap.m.Dialog({contentWidth:"300px",resiza+
ble:true,type:"Message",escapeHandler:function(e){t.close();t.destroy()}});t.setTitle("Carregar arquivo");var s="/sap/opu/odata/SAP/ZCA_TIMESHEET_SRV/";var r=new sap.ui.model.odata.ODataModel(s,false);var i=s+"uploadFileSet";var n=new sap.ui.unified.File+
Uploader({width:"100%",fileType:["xlsx","xls"],typeMissmatch:this.handleTypeMissmatch,uploadComplete:function(e){t.close();t.destroy();this.templateBaseExtension.getExtensionAPI().refreshTable();if(e.mParameters.status=="200"||e.mParameters.status=="201"+
){sap.m.MessageToast.show("Carga realizada com sucesso.")}else{if(e.mParameters.response){if(e.mParameters.responseRaw.search("<message>")){var a=e.mParameters.responseRaw.split("<message>")[1].split("</message>")[0];alert(a)}else{alert("Return Code: "+e+
.mParameters.response,"Response","Response")}}}}.bind(this)});n.setName("Simple Uploader");n.setUploadUrl(i);n.setSendXHR(true);n.setUseMultipart(false);n.setUploadOnChange(false);var o=new sap.ui.unified.FileUploaderParameter({name:"x-csrf-token",value:+
r.getSecurityToken()});n.insertHeaderParameter(o);var l=new sap.m.Button({text:"Upload",type:"Accept",press:function(){var e=n.getFocusDomRef();var a=e.files[0];if(n.getValue()===""){sap.m.MessageToast.show("Favor selecionar um arquivo");return}var t=new+
 sap.ui.unified.FileUploaderParameter({name:"Content-Type",value:a.type});n.insertHeaderParameter(t);n.insertHeaderParameter(new sap.ui.unified.FileUploaderParameter({name:"SLUG",value:n.getValue()}));n.upload()}.bind(this)});var p=new sap.m.Button({text+
:"Cancelar",type:"Reject",press:function(){t.close();t.destroy();this.getView().removeAllDependents()}.bind(this)});t.addContent(n);t.setBeginButton(p);t.setEndButton(l);t.open()},handleTypeMissmatch:function(e){var a=e.getSource().getFileType();jQuery.e+
ach(a,function(e,t){a[e]="*."+t});var t=a.join(", ");sap.m.MessageToast.show("Tipo de arquivo *."+e.getParameter("fileType")+" não é suportado. Escolha um dos tipos a seguir: "+t)},navegar:function(e){var a=this.getView().byId("listReportFilter").getFilt+
erData();var t=a.Contrato;var s=a.Tarefa;var r=a.Usuario;var i=[];var n=[];var o=[];if(t!=null&&t!="undefined"){for(let e=0;e<t.items.length;e++){i[e]=t.items[e].key}}if(s!=null&&s!="undefined"){for(let e=0;e<s.items.length;e++){n[e]=s.items[e].key}}if(r+
!=null&&r!="undefined"){for(let e=0;e<r.items.length;e++){o[e]=r.items[e].key}}sap.ushell.Container.getService("CrossApplicationNavigation").isNavigationSupported([{target:{shellHash:"timesheet_res-display"}}]).done(function(e){e.map(function(e,a){if(e.s+
upported===true){var t=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation").hrefForExternal({target:{semanticObject:"timesheet_res",action:"display"},params:{Contrato:i,Tarefa:n,Usuario:o}});sap.m.URLHelper.redi+
rect(t,false)}else{alert("Usuário sem permissão para acessar o link")}})}).fail(function(){alert("Falha ao acessar o link")})}}});                                                                                                                             